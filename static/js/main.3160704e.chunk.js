(this["webpackJsonpipl-frontend"]=this["webpackJsonpipl-frontend"]||[]).push([[0],{16:function(e,t,a){e.exports=a(32)},23:function(e,t,a){},24:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(15),c=a.n(r),o=(a(23),a(3)),m=a(7),u=a(33);a(24);var s=()=>{const[e,t]=Object(l.useState)(""),[a,r]=Object(l.useState)(""),[c,m]=Object(l.useState)(""),s=Object(o.o)();return n.a.createElement("div",{className:"login-bg"},n.a.createElement("div",{className:"login-card"},n.a.createElement("h2",null,"Login"),n.a.createElement("form",{onSubmit:async t=>{t.preventDefault();try{const t=await u.a.post("http://localhost:5000/api/login",{username:e,code:a});localStorage.setItem("user_id",t.data.user.id),localStorage.setItem("username",t.data.user.username),localStorage.setItem("user_type",t.data.user.user_type),s("/home")}catch(l){m("Login failed. Please check your credentials.")}}},n.a.createElement("input",{placeholder:"Username",value:e,onChange:e=>t(e.target.value),required:!0}),n.a.createElement("input",{placeholder:"Code",type:"password",value:a,onChange:e=>r(e.target.value),required:!0}),n.a.createElement("button",{type:"submit"},"Login"),c&&n.a.createElement("p",{className:"error"},c))))};a(29);var i=()=>{const[e,t]=Object(l.useState)([]),[a,r]=Object(l.useState)(""),[c,m]=Object(l.useState)(""),[s,i]=Object(l.useState)(""),[d,E]=Object(l.useState)(""),[p,h]=Object(l.useState)(""),[b,g]=Object(l.useState)([]),[v,y]=Object(l.useState)([]),S=localStorage.getItem("user_id"),f=Object(o.o)();Object(l.useEffect)(()=>{u.a.get("http://localhost:5000/api/get-matches").then(e=>{t(e.data.matches)}).catch(e=>{console.error("Failed to load matches:",e),t([])})},[]);return n.a.createElement("div",{className:"predict-bg"},n.a.createElement("div",{className:"predict-card"},n.a.createElement("h2",null,"Submit Your Prediction"),n.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{await u.a.post("http://localhost:5000/api/submit-prediction",{user_id:S,match_id:a,predicted_first_innings_score:Number(c),predicted_match_winner:s,predicted_man_of_the_match:d}),h("\u2705 Prediction submitted!"),setTimeout(()=>{f("/home")},1500)}catch(t){console.error(t),h("\u274c Submission failed. Try again.")}}},n.a.createElement("label",null,"Select Match:"),n.a.createElement("select",{value:a,onChange:async t=>{const a=t.target.value;r(a);const l=e.find(e=>e.id===a);if(!l)return;const{team1:n,team2:c}=l;g([n,c]);try{const e=await u.a.get("http://localhost:5000/api/players",{params:{team1:n,team2:c}});y(e.data.players||[])}catch(o){console.error("Failed to load players:",o),y([])}},required:!0},n.a.createElement("option",{value:""},"--Choose a match--"),e.map(e=>n.a.createElement("option",{key:e.id,value:e.id},e.team1," vs ",e.team2," (",new Date(e.match_date).toDateString(),")"))),n.a.createElement("label",null,"First Innings Score:"),n.a.createElement("input",{type:"number",value:c,onChange:e=>m(e.target.value),required:!0}),n.a.createElement("label",null,"Match Winner:"),n.a.createElement("select",{value:s,onChange:e=>i(e.target.value),required:!0},n.a.createElement("option",{value:""},"--Choose team--"),b.map(e=>n.a.createElement("option",{key:e,value:e},e))),n.a.createElement("label",null,"Man of the Match:"),n.a.createElement("select",{value:d,onChange:e=>E(e.target.value),required:!0},n.a.createElement("option",{value:""},"--Choose player--"),v.map(e=>n.a.createElement("option",{key:e,value:e},e))),n.a.createElement("button",{type:"submit"},"Submit Prediction")),p&&n.a.createElement("p",{className:"message"},p)))},d=a(5);a(30);var E=()=>{const[e,t]=Object(l.useState)([]),a=Object(o.o)();Object(l.useEffect)(()=>{u.a.get("http://localhost:5000/api/leaderboard").then(e=>t(e.data.leaderboard)).catch(e=>console.error("Failed to fetch leaderboard:",e))},[]);const r=(t,a)=>{const l=[...e].sort((e,t)=>t[a]-e[a]);return n.a.createElement("div",{className:"leaderboard-section"},n.a.createElement("h3",null,t),n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Player"),n.a.createElement("th",null,t),n.a.createElement("th",null,"Rank"))),n.a.createElement("tbody",null,l.map((e,t)=>n.a.createElement("tr",{key:e.username},n.a.createElement("td",null,e.username),n.a.createElement("td",null,e[a]),n.a.createElement("td",null,t+1))))))},c=e=>e.fis_points+e.mw_points+e.mom_points;return n.a.createElement("div",{className:"leaderboard-container"},n.a.createElement("button",{className:"back-button",onClick:()=>a("/home")},n.a.createElement("span",{role:"img","aria-label":"back arrow"},"\u2b05")," Back to Home"),(()=>{const t=[...e].map(e=>Object(d.a)(Object(d.a)({},e),{},{total:c(e)})).sort((e,t)=>t.total-e.total);return n.a.createElement("div",{className:"leaderboard-section"},n.a.createElement("h2",null,n.a.createElement("span",{role:"img","aria-label":"trophy"},"\ud83c\udfc6")," Current Standings"),n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Player"),n.a.createElement("th",null,"Total"),n.a.createElement("th",null,"Rank"))),n.a.createElement("tbody",null,t.map((e,t)=>n.a.createElement("tr",{key:e.username},n.a.createElement("td",null,e.username),n.a.createElement("td",null,e.total),n.a.createElement("td",null,t+1))))))})(),n.a.createElement("div",{className:"leaderboard-grid"},r("Match Winner","mw_points"),r("First Innings Score","fis_points"),r("MOM","mom_points")))};a(31);var p=()=>{const e=Object(o.o)(),t=localStorage.getItem("username")||"Player";return n.a.createElement("div",{className:"home-bg"},n.a.createElement("div",{className:"home-card"},n.a.createElement("h1",null,"Welcome, ",t,"!"),n.a.createElement("p",null,"Get started with your IPL Fantasy predictions below:"),n.a.createElement("div",{className:"home-buttons"},n.a.createElement("button",{onClick:()=>e("/predict")},n.a.createElement("span",{role:"img","aria-label":"crystal ball"},"\ud83d\udd2e")," Make Prediction"),n.a.createElement("button",{onClick:()=>e("/leaderboard")},n.a.createElement("span",{role:"img","aria-label":"bar chart"},"\ud83d\udcca")," View Leaderboard")),n.a.createElement("button",{className:"logout-button",onClick:()=>{localStorage.clear(),e("/")}},n.a.createElement("span",{role:"img","aria-label":"door"},"\ud83d\udeaa")," Logout")))};var h=()=>{const[e,t]=Object(l.useState)([]),[a,r]=Object(l.useState)(""),[c,o]=Object(l.useState)(""),[m,s]=Object(l.useState)(""),[i,d]=Object(l.useState)(""),[E,p]=Object(l.useState)("");Object(l.useEffect)(()=>{u.a.get("http://localhost:5000/api/get-matches").then(e=>t(e.data.matches)).catch(e=>console.error(e))},[]);return n.a.createElement("div",{style:{padding:"2rem"}},n.a.createElement("h2",null,"Update Match Result"),n.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{await u.a.post("http://localhost:5000/api/update-results",{schedule_id:a,actual_first_innings_score:Number(c),actual_match_winner:m,actual_mom:i}),p("Match result saved!")}catch(t){p("Failed to save result.")}}},n.a.createElement("div",null,n.a.createElement("label",null,"Match:"),n.a.createElement("select",{value:a,onChange:e=>r(e.target.value),required:!0},n.a.createElement("option",{value:""},"--Select--"),e.map(e=>n.a.createElement("option",{key:e.id,value:e.id},e.team1," vs ",e.team2," (",new Date(e.match_date).toDateString(),")")))),n.a.createElement("div",null,n.a.createElement("label",null,"Actual First Innings Score:"),n.a.createElement("input",{type:"number",value:c,onChange:e=>o(e.target.value),required:!0})),n.a.createElement("div",null,n.a.createElement("label",null,"Match Winner:"),n.a.createElement("input",{type:"text",value:m,onChange:e=>s(e.target.value),required:!0})),n.a.createElement("div",null,n.a.createElement("label",null,"Man of the Match:"),n.a.createElement("input",{type:"text",value:i,onChange:e=>d(e.target.value),required:!0})),n.a.createElement("button",{type:"submit"},"Save Result")),E&&n.a.createElement("p",null,E))};const b=()=>{const e=Object(o.o)();return n.a.createElement(o.c,null,n.a.createElement(o.a,{path:"/",element:n.a.createElement(s,{onLogin:()=>{e("/predict")}})}),n.a.createElement(o.a,{path:"/home",element:n.a.createElement(p,null)}),n.a.createElement(o.a,{path:"/predict",element:n.a.createElement(i,null)}),n.a.createElement(o.a,{path:"/leaderboard",element:n.a.createElement(E,null)}),n.a.createElement(o.a,{path:"/admin/results",element:n.a.createElement(h,null)}))};var g=()=>n.a.createElement(m.a,null,n.a.createElement(b,null));var v=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,34)).then(t=>{let{getCLS:a,getFID:l,getFCP:n,getLCP:r,getTTFB:c}=t;a(e),l(e),n(e),r(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(g,null))),v()}},[[16,1,2]]]);
//# sourceMappingURL=main.3160704e.chunk.js.map